 // 1. åŸºç¡€æ ¼å¼åŒ–
// DateUtil.formatDate(new Date(), DateUtil.FORMATS.DATE)
//  è¾“å‡º: "2024-01-15"

// 2. ä¸­æ–‡æ ¼å¼
// DateUtil.formatDate(new Date(), DateUtil.FORMATS.DATETIME_CN)
//  è¾“å‡º: "2024å¹´01æœˆ15æ—¥ 14æ—¶30åˆ†"

//  3. ç›¸å¯¹æ—¶é—´
// DateUtil.formatRelativeTime(Date.now() - 300000)
//  è¾“å‡º: "5åˆ†é’Ÿå‰"

//  4. è‡ªå®šä¹‰æ ¼å¼
// DateUtil.formatDate(new Date(), 'yyyyå¹´MMæœˆddæ—¥ EEEE HH:mm')
//  è¾“å‡º: "2024å¹´01æœˆ15æ—¥ æ˜ŸæœŸä¸€ 14:30"

//  5. æ—¶é—´å·®è®¡ç®—
// const diff = DateUtil.timeDiff(startDate, endDate)
//  è¿”å›: { days: 1, hours: 2, minutes: 30, seconds: 45 }

//  6. æ—¥æœŸåˆ¤æ–­
// DateUtil.isToday(someDate)     // æ˜¯å¦ä¸ºä»Šå¤©
// DateUtil.isYesterday(someDate) // æ˜¯å¦ä¸ºæ˜¨å¤©
// DateUtil.isThisWeek(someDate)  // æ˜¯å¦ä¸ºæœ¬å‘¨

//  7. æ—¶é—´æ¯”è¾ƒ
// DateUtil.isBefore(date1, date2)        // date1æ˜¯å¦æ—©äºdate2
// DateUtil.isAfter(date1, date2)         // date1æ˜¯å¦æ™šäºdate2
// DateUtil.isEqual(date1, date2)         // ä¸¤ä¸ªæ—¶é—´æ˜¯å¦ç›¸ç­‰
// DateUtil.isBetween(date, start, end)   // æ˜¯å¦åœ¨æ—¶é—´èŒƒå›´å†…
// DateUtil.isSameDayAs(date1, date2)     // æ˜¯å¦ä¸ºåŒä¸€å¤©
// DateUtil.min(date1, date2)             // è·å–è¾ƒæ—©çš„æ—¥æœŸ
// DateUtil.max(date1, date2)             // è·å–è¾ƒæ™šçš„æ—¥æœŸ

//  8. å¹´ä»½ç›¸å…³
// DateUtil.getDayOfYearPublic(date)      // è·å–ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©
// DateUtil.isLeapYear(2024)              // åˆ¤æ–­æ˜¯å¦ä¸ºé—°å¹´


// å£°æ˜æ¥å£ç±»å‹ä»¥æ»¡è¶³ArkTSç±»å‹æ£€æŸ¥

/**
 * ç›¸å¯¹æ—¶é—´å•ä½é…ç½®æ¥å£
 * @interface RelativeTimeUnit
 */
interface RelativeTimeUnit {
  /** æ—¶é—´å•ä½åç§° */
  unit: string;
  /** é˜ˆå€¼ï¼ˆç§’ï¼‰ */
  threshold: number;
  /** é™¤æ•°ï¼ˆç”¨äºè®¡ç®—å•ä½æ•°é‡ï¼‰ */
  divisor: number;
}

/**
 * æœ¬åœ°åŒ–å­—ç¬¦ä¸²æ¥å£
 * @interface LocaleStrings
 */
interface LocaleStrings {
  /** åˆšåˆš */
  justNow: string;
  /** åˆ†é’Ÿå‰ */
  minutesAgo: string;
  /** å°æ—¶å‰ */
  hoursAgo: string;
  /** å¤©å‰ */
  daysAgo: string;
  /** å‘¨å‰ */
  weeksAgo: string;
  /** ä¸ªæœˆå‰ */
  monthsAgo: string;
  /** å¹´å‰ */
  yearsAgo: string;
  /** åï¼ˆæœªæ¥æ—¶é—´ï¼‰ */
  in: string;
  /** åˆ†é’Ÿ */
  minutes: string;
  /** å°æ—¶ */
  hours: string;
  /** å¤© */
  days: string;
  /** å‘¨ */
  weeks: string;
  /** ä¸ªæœˆ */
  months: string;
  /** å¹´ */
  years: string;
  /** æ˜¨å¤© */
  yesterday: string;
  /** ä»Šå¤© */
  today: string;
  /** æ˜å¤© */
  tomorrow: string;
  /** ä¸Šåˆ */
  am: string;
  /** ä¸‹åˆ */
  pm: string;
}

/**
 * é¢„è®¾æ—¥æœŸæ ¼å¼æ¥å£
 * @interface DateFormats
 */
interface DateFormats {
  /** åŸºç¡€æ—¥æœŸæ ¼å¼: yyyy-MM-dd */
  DATE: string;
  /** åŸºç¡€æ—¶é—´æ ¼å¼: HH:mm:ss */
  TIME: string;
  /** åŸºç¡€æ—¥æœŸæ—¶é—´æ ¼å¼: yyyy-MM-dd HH:mm:ss */
  DATETIME: string;
  /** ä¸­æ–‡æ—¥æœŸæ ¼å¼: yyyyå¹´MMæœˆddæ—¥ */
  DATE_CN: string;
  /** ä¸­æ–‡æ—¶é—´æ ¼å¼: HHæ—¶mmåˆ†ssç§’ */
  TIME_CN: string;
  /** ä¸­æ–‡æ—¥æœŸæ—¶é—´æ ¼å¼: yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ† */
  DATETIME_CN: string;
  /** 12å°æ—¶åˆ¶æ—¶é—´æ ¼å¼: hh:mm:ss a */
  TIME_12: string;
  /** 12å°æ—¶åˆ¶æ—¥æœŸæ—¶é—´æ ¼å¼: yyyy-MM-dd hh:mm:ss a */
  DATETIME_12: string;
  /** ISOæ—¥æœŸæ ¼å¼: yyyy-MM-dd */
  ISO_DATE: string;
  /** ISOæ—¶é—´æ ¼å¼: HH:mm:ss.SSS (SSSè¡¨ç¤ºæ¯«ç§’) */
  ISO_TIME: string;
  /** ISOæ—¥æœŸæ—¶é—´æ ¼å¼: yyyy-MM-ddTHH:mm:ss.SSSZ */
  ISO_DATETIME: string;
  /** å‹å¥½æ—¥æœŸæ ¼å¼: MMæœˆddæ—¥ */
  FRIENDLY_DATE: string;
  /** å‹å¥½æ—¶é—´æ ¼å¼: HH:mm */
  FRIENDLY_TIME: string;
  /** å‹å¥½æ—¥æœŸæ—¶é—´æ ¼å¼: MM-dd HH:mm */
  FRIENDLY_DATETIME: string;
  /** å®Œæ•´æ—¥æœŸæ ¼å¼: yyyyå¹´MMæœˆddæ—¥ EEEE */
  FULL_DATE: string;
  /** å®Œæ•´æ—¥æœŸæ—¶é—´æ ¼å¼: yyyyå¹´MMæœˆddæ—¥ EEEE HH:mm:ss */
  FULL_DATETIME: string;
}

/**
 * æ—¶é—´å·®è®¡ç®—ç»“æœæ¥å£
 * @interface TimeDifference
 */
interface TimeDifference {
  /** å¤©æ•° */
  days: number;
  /** å°æ—¶æ•° */
  hours: number;
  /** åˆ†é’Ÿæ•° */
  minutes: number;
  /** ç§’æ•° */
  seconds: number;
}

/**
 * é¸¿è’™ArkTSæ—¥æœŸæ—¶é—´æ ¼å¼åŒ–å·¥å…·ç±»
 *
 * æä¾›å…¨é¢çš„æ—¥æœŸæ—¶é—´å¤„ç†åŠŸèƒ½ï¼Œå®Œå…¨å…¼å®¹ArkTSè¯­æ³•è§„èŒƒ
 * æ”¯æŒå¤šç§æ ¼å¼åŒ–æ–¹å¼ã€å›½é™…åŒ–ã€ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºç­‰åŠŸèƒ½
 *
 * @class DateUtil
 * @static
 */
export class DateUtil {
  /**
   * å¸¸ç”¨æ—¥æœŸæ—¶é—´æ ¼å¼é¢„è®¾
   *
   * @example
   * ```typescript
   * // ä½¿ç”¨é¢„è®¾æ ¼å¼
   * DateUtil.formatDate(new Date(), DateUtil.FORMATS.DATE_CN)
   * // è¾“å‡º: "2024å¹´01æœˆ15æ—¥"
   *
   * DateUtil.formatDate(new Date(), DateUtil.FORMATS.TIME_12)
   * // è¾“å‡º: "02:30:15 ä¸‹åˆ"
   * ```
   *
   * @static
   * @readonly
   */
  public static readonly FORMATS: DateFormats = {
    // åŸºç¡€æ ¼å¼
    DATE: 'yyyy-MM-dd',
    TIME: 'HH:mm:ss',
    DATETIME: 'yyyy-MM-dd HH:mm:ss',

    // ä¸­æ–‡æ ¼å¼
    DATE_CN: 'yyyyå¹´MMæœˆddæ—¥',
    TIME_CN: 'HHæ—¶mmåˆ†ssç§’',
    DATETIME_CN: 'yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†',

    // 12å°æ—¶åˆ¶
    TIME_12: 'hh:mm:ss a',
    DATETIME_12: 'yyyy-MM-dd hh:mm:ss a',

    // ISOæ ¼å¼
    ISO_DATE: 'yyyy-MM-dd',
    ISO_TIME: 'HH:mm:ss.SSS', // SSSè¡¨ç¤ºæ¯«ç§’
    ISO_DATETIME: 'yyyy-MM-ddTHH:mm:ss.SSSD', // Dè¡¨ç¤ºå¹´ä»½ä¸­çš„å¤©æ•°

    // å‹å¥½æ ¼å¼
    FRIENDLY_DATE: 'MMæœˆddæ—¥',
    FRIENDLY_TIME: 'HH:mm',
    FRIENDLY_DATETIME: 'MM-dd HH:mm',

    // å®Œæ•´æ ¼å¼
    FULL_DATE: 'yyyyå¹´MMæœˆddæ—¥ EEEE',
    FULL_DATETIME: 'yyyyå¹´MMæœˆddæ—¥ EEEE HH:mm:ss'
  };

  /**
   * ç›¸å¯¹æ—¶é—´è®¡ç®—å•ä½é…ç½®
   * ç”¨äºå°†æ—¶é—´å·®è½¬æ¢ä¸ºå‹å¥½çš„ç›¸å¯¹æ—¶é—´æ˜¾ç¤º
   *
   * @private
   * @static
   * @readonly
   */
  private static readonly TIME_UNITS: RelativeTimeUnit[] = [
    { unit: 'second', threshold: 60, divisor: 1 },
    { unit: 'minute', threshold: 3600, divisor: 60 },
    { unit: 'hour', threshold: 86400, divisor: 3600 },
    { unit: 'day', threshold: 604800, divisor: 86400 },
    { unit: 'week', threshold: 2592000, divisor: 604800 },
    { unit: 'month', threshold: 31536000, divisor: 2592000 },
    { unit: 'year', threshold: 999999999, divisor: 31536000 }
  ];

  /**
   * æ—¥æœŸæ ¼å¼åŒ–æ­£åˆ™è¡¨è¾¾å¼
   * ç”¨äºåŒ¹é…å’Œæ›¿æ¢æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„æ¨¡å¼
   *
   * @private
   * @static
   * @readonly
   */
  private static readonly FORMAT_REGEX: RegExp = /(yyyy|yy|MMMM|MMM|MM|M|dd|d|DDD|DD|D|EEEE|EEE|EE|E|HH|H|hh|h|mm|m|ss|s|SSS|SS|S|a|z|Z)/g;

  /**
   * æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´
   *
   * æ”¯æŒå¤šç§è¾“å…¥ç±»å‹å’Œæ ¼å¼åŒ–é€‰é¡¹ï¼Œæ˜¯æœ¬å·¥å…·ç±»çš„æ ¸å¿ƒæ–¹æ³•
   *
   * @param date è¦æ ¼å¼åŒ–çš„æ—¥æœŸï¼Œæ”¯æŒDateå¯¹è±¡ã€æ—¶é—´æˆ³(æ¯«ç§’)ã€ISO8601å­—ç¬¦ä¸²
   * @param format æ ¼å¼å­—ç¬¦ä¸²ï¼Œæ”¯æŒé¢„è®¾æ ¼å¼æˆ–è‡ªå®šä¹‰æ ¼å¼ï¼Œé»˜è®¤ä¸ºå®Œæ•´æ—¥æœŸæ—¶é—´æ ¼å¼
   * @param locale æœ¬åœ°åŒ–è®¾ç½®ï¼Œæ”¯æŒ'zh-CN'å’Œ'en-US'ï¼Œé»˜è®¤ä¸º'zh-CN'
   * @returns æ ¼å¼åŒ–åçš„æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²ï¼Œè§£æå¤±è´¥æ—¶è¿”å›null
   *
   * @example åŸºç¡€ç”¨æ³•
   * ```typescript
   * const now = new Date();
   *
   * // ä½¿ç”¨é¢„è®¾æ ¼å¼
   * DateUtil.formatDate(now, DateUtil.FORMATS.DATE)
   * // è¾“å‡º: "2024-01-15"
   *
   * DateUtil.formatDate(now, DateUtil.FORMATS.DATETIME_CN)
   * // è¾“å‡º: "2024å¹´01æœˆ15æ—¥ 14æ—¶30åˆ†"
   *
   * // ä½¿ç”¨æ—¶é—´æˆ³
   * DateUtil.formatDate(1705304400000, DateUtil.FORMATS.TIME)
   * // è¾“å‡º: "14:30:00"
   *
   * // ä½¿ç”¨ISOå­—ç¬¦ä¸²
   * DateUtil.formatDate('2024-01-15T14:30:00.000Z', DateUtil.FORMATS.DATE_CN)
   * // è¾“å‡º: "2024å¹´01æœˆ15æ—¥"
   * ```
   *
   * @example è‡ªå®šä¹‰æ ¼å¼
   * ```typescript
   * // å®Œå…¨è‡ªå®šä¹‰æ ¼å¼
   * DateUtil.formatDate(now, 'yyyyå¹´MMæœˆddæ—¥ EEEE HH:mm:ss')
   * // è¾“å‡º: "2024å¹´01æœˆ15æ—¥ æ˜ŸæœŸä¸€ 14:30:25"
   *
   * // 12å°æ—¶åˆ¶å¸¦æ¯«ç§’
   * DateUtil.formatDate(now, 'hh:mm:ss.SSS a')
   * // è¾“å‡º: "02:30:25.123 ä¸‹åˆ"
   *
   * // ç®€åŒ–æ ¼å¼
   * DateUtil.formatDate(now, 'MM-dd HH:mm')
   * // è¾“å‡º: "01-15 14:30"
   * ```
   *
   * @example å¤šè¯­è¨€æ”¯æŒ
   * ```typescript
   * // ä¸­æ–‡æ ¼å¼
   * DateUtil.formatDate(now, 'MMMM dd, yyyy', 'zh-CN')
   * // è¾“å‡º: "ä¸€æœˆ 15, 2024"
   *
   * // è‹±æ–‡æ ¼å¼
   * DateUtil.formatDate(now, 'MMMM dd, yyyy', 'en-US')
   * // è¾“å‡º: "January 15, 2024"
   * ```
   *
   * @static
   * @public
   */
  public static formatDate(
    date: Date | number | string,
    format: string = DateUtil.FORMATS.DATETIME,
    locale: string = 'zh-CN'
  ): string | null {
    if (!date) return null;

    const dateObj = DateUtil.parseDate(date);
    if (!dateObj) return null;

    // å¦‚æœæ˜¯é¢„è®¾æ ¼å¼ï¼Œä¼˜å…ˆä½¿ç”¨ç³»ç»ŸAPI
    if (DateUtil.isPresetFormat(format)) {
      const systemResult = DateUtil.formatWithSystemAPI(dateObj, format, locale);
      if (systemResult) return systemResult;
    }

    // ä½¿ç”¨è‡ªå®šä¹‰æ ¼å¼åŒ–
    return DateUtil.customFormat(dateObj, format, locale);
  }

  /**
   * æ ¼å¼åŒ–ç›¸å¯¹æ—¶é—´
   *
   * å°†æ—¥æœŸè½¬æ¢ä¸ºç›¸å¯¹äºå½“å‰æ—¶é—´çš„å‹å¥½æ˜¾ç¤ºæ ¼å¼ï¼Œå¦‚"5åˆ†é’Ÿå‰"ã€"æ˜¨å¤© 14:30"ç­‰
   * æ”¯æŒæ™ºèƒ½åˆ¤æ–­æ˜¾ç¤ºä»Šå¤©ã€æ˜¨å¤©ã€æ˜å¤©ç­‰ç‰¹æ®Šæƒ…å†µ
   *
   * @param date è¦æ ¼å¼åŒ–çš„æ—¥æœŸ
   * @param locale æœ¬åœ°åŒ–è®¾ç½®ï¼Œé»˜è®¤ä¸º'zh-CN'
   * @param maxDays è¶…è¿‡å¤šå°‘å¤©åæ˜¾ç¤ºç»å¯¹æ—¶é—´è€Œéç›¸å¯¹æ—¶é—´ï¼Œé»˜è®¤7å¤©
   * @returns ç›¸å¯¹æ—¶é—´å­—ç¬¦ä¸²ï¼Œè§£æå¤±è´¥æ—¶è¿”å›null
   *
   * @example åŸºç¡€ç”¨æ³•
   * ```typescript
   * const now = Date.now();
   *
   * // 1åˆ†é’Ÿå‰
   * DateUtil.formatRelativeTime(now - 60 * 1000)
   * // è¾“å‡º: "1åˆ†é’Ÿå‰"
   *
   * // 5å°æ—¶å‰
   * DateUtil.formatRelativeTime(now - 5 * 60 * 60 * 1000)
   * // è¾“å‡º: "5å°æ—¶å‰"
   *
   * // åˆšåˆšï¼ˆ1åˆ†é’Ÿå†…ï¼‰
   * DateUtil.formatRelativeTime(now - 30 * 1000)
   * // è¾“å‡º: "åˆšåˆš"
   * ```
   *
   * @example ç‰¹æ®Šæƒ…å†µå¤„ç†
   * ```typescript
   * // ä»Šå¤©çš„æ—¶é—´æ˜¾ç¤ºå…·ä½“æ—¶åˆ»
   * DateUtil.formatRelativeTime(todayEarlier)
   * // è¾“å‡º: "ä»Šå¤© 09:30"
   *
   * // æ˜¨å¤©çš„æ—¶é—´
   * DateUtil.formatRelativeTime(yesterday)
   * // è¾“å‡º: "æ˜¨å¤© 14:30"
   *
   * // æ˜å¤©çš„æ—¶é—´ï¼ˆæœªæ¥æ—¶é—´ï¼‰
   * DateUtil.formatRelativeTime(tomorrow)
   * // è¾“å‡º: "æ˜å¤© 10:00"
   * ```
   *
   * @example è‡ªå®šä¹‰æœ€å¤§å¤©æ•°
   * ```typescript
   * // è¶…è¿‡3å¤©æ˜¾ç¤ºç»å¯¹æ—¥æœŸ
   * DateUtil.formatRelativeTime(oldDate, 'zh-CN', 3)
   * // è¶…è¿‡3å¤©è¾“å‡º: "2024-01-10"
   * // 3å¤©å†…è¾“å‡º: "3å¤©å‰"
   * ```
   *
   * @static
   * @public
   */
  public static formatRelativeTime(
    date: Date | number | string,
    locale: string = 'zh-CN',
    maxDays: number = 7
  ): string | null {
    const dateObj = DateUtil.parseDate(date);
    if (!dateObj) return null;

    const now = new Date();
    const diffInSeconds = Math.floor((now.getTime() - dateObj.getTime()) / 1000);
    const absDiff = Math.abs(diffInSeconds);

    // è¶…è¿‡æŒ‡å®šå¤©æ•°ï¼Œè¿”å›ç»å¯¹æ—¶é—´
    if (absDiff > maxDays * 86400) {
      return DateUtil.formatDate(dateObj, DateUtil.FORMATS.DATE, locale);
    }

    const strings = DateUtil.getLocaleStrings(locale);

    // åˆšåˆšï¼ˆ1åˆ†é’Ÿå†…ï¼‰
    if (absDiff < 60) {
      return strings.justNow;
    }

    // å¤„ç†ç‰¹æ®Šæƒ…å†µï¼šæ˜¨å¤©ã€ä»Šå¤©ã€æ˜å¤©
    const today = new Date();
    const yesterday = new Date(today);
    yesterday.setDate(today.getDate() - 1);
    const tomorrow = new Date(today);
    tomorrow.setDate(today.getDate() + 1);

    if (DateUtil.isSameDay(dateObj, today)) {
      return `${strings.today} ${DateUtil.formatDate(dateObj, 'HH:mm', locale)}`;
    }
    if (DateUtil.isSameDay(dateObj, yesterday)) {
      return `${strings.yesterday} ${DateUtil.formatDate(dateObj, 'HH:mm', locale)}`;
    }
    if (DateUtil.isSameDay(dateObj, tomorrow)) {
      return `${strings.tomorrow} ${DateUtil.formatDate(dateObj, 'HH:mm', locale)}`;
    }

    // ä½¿ç”¨ç›¸å¯¹æ—¶é—´å•ä½
    for (let i = 0; i < DateUtil.TIME_UNITS.length; i++) {
      const timeUnit = DateUtil.TIME_UNITS[i];
      if (absDiff < timeUnit.threshold) {
        const value = Math.floor(absDiff / timeUnit.divisor);
        return DateUtil.formatRelativeTimeString(value, timeUnit.unit, diffInSeconds < 0, strings);
      }
    }

    return DateUtil.formatDate(dateObj, DateUtil.FORMATS.DATE, locale);
  }

  /**
   * åˆ¤æ–­æŒ‡å®šæ—¥æœŸæ˜¯å¦ä¸ºä»Šå¤©
   *
   * @param date è¦åˆ¤æ–­çš„æ—¥æœŸ
   * @returns æ˜¯å¦ä¸ºä»Šå¤©
   *
   * @example
   * ```typescript
   * DateUtil.isToday(new Date())           // true
   * DateUtil.isToday(Date.now())           // true
   * DateUtil.isToday('2024-01-15')         // æ ¹æ®å½“å‰æ—¥æœŸåˆ¤æ–­
   * DateUtil.isToday(yesterdayDate)        // false
   * ```
   *
   * @static
   * @public
   */
  public static isToday(date: Date | number | string): boolean {
    const dateObj = DateUtil.parseDate(date);
    if (!dateObj) return false;
    return DateUtil.isSameDay(dateObj, new Date());
  }

  /**
   * åˆ¤æ–­æŒ‡å®šæ—¥æœŸæ˜¯å¦ä¸ºæ˜¨å¤©
   *
   * @param date è¦åˆ¤æ–­çš„æ—¥æœŸ
   * @returns æ˜¯å¦ä¸ºæ˜¨å¤©
   *
   * @example
   * ```typescript
   * const yesterday = new Date();
   * yesterday.setDate(yesterday.getDate() - 1);
   *
   * DateUtil.isYesterday(yesterday)        // true
   * DateUtil.isYesterday(new Date())       // false
   * ```
   *
   * @static
   * @public
   */
  public static isYesterday(date: Date | number | string): boolean {
    const dateObj = DateUtil.parseDate(date);
    if (!dateObj) return false;
    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);
    return DateUtil.isSameDay(dateObj, yesterday);
  }

  /**
   * åˆ¤æ–­æŒ‡å®šæ—¥æœŸæ˜¯å¦åœ¨æœ¬å‘¨å†…
   *
   * ä»¥æ˜ŸæœŸæ—¥ä¸ºä¸€å‘¨çš„å¼€å§‹è®¡ç®—
   *
   * @param date è¦åˆ¤æ–­çš„æ—¥æœŸ
   * @returns æ˜¯å¦ä¸ºæœ¬å‘¨
   *
   * @example
   * ```typescript
   * DateUtil.isThisWeek(new Date())        // true
   * DateUtil.isThisWeek(lastWeekDate)      // false
   * DateUtil.isThisWeek(nextWeekDate)      // false
   * ```
   *
   * @static
   * @public
   */
  public static isThisWeek(date: Date | number | string): boolean {
    const dateObj = DateUtil.parseDate(date);
    if (!dateObj) return false;

    const now = new Date();
    const startOfWeek = new Date(now);
    startOfWeek.setDate(now.getDate() - now.getDay());
    startOfWeek.setHours(0, 0, 0, 0);

    const endOfWeek = new Date(startOfWeek);
    endOfWeek.setDate(startOfWeek.getDate() + 6);
    endOfWeek.setHours(23, 59, 59, 999);

    return dateObj >= startOfWeek && dateObj <= endOfWeek;
  }

  /**
   * è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æ—¶é—´å·®
   *
   * è¿”å›è¯¦ç»†çš„æ—¶é—´å·®ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¤©ã€å°æ—¶ã€åˆ†é’Ÿã€ç§’
   *
   * @param startDate å¼€å§‹æ—¥æœŸ
   * @param endDate ç»“æŸæ—¥æœŸï¼Œé»˜è®¤ä¸ºå½“å‰æ—¶é—´
   * @returns æ—¶é—´å·®å¯¹è±¡ï¼ŒåŒ…å«daysã€hoursã€minutesã€secondså±æ€§ï¼Œè§£æå¤±è´¥æ—¶è¿”å›null
   *
   * @example
   * ```typescript
   * const start = new Date('2024-01-15 10:30:00');
   * const end = new Date('2024-01-16 14:45:30');
   *
   * const diff = DateUtil.timeDiff(start, end);
   * console.log(diff);
   * // è¾“å‡º: { days: 1, hours: 4, minutes: 15, seconds: 30 }
   *
   * // è·ç¦»å½“å‰æ—¶é—´çš„å·®å€¼
   * const diffFromNow = DateUtil.timeDiff(start);
   * console.log(diffFromNow);
   * // è¾“å‡º: { days: 0, hours: 2, minutes: 30, seconds: 45 }
   * ```
   *
   * @example å®é™…åº”ç”¨åœºæ™¯
   * ```typescript
   * // è®¡ç®—æ´»åŠ¨å‰©ä½™æ—¶é—´
   * const eventEnd = new Date('2024-12-31 23:59:59');
   * const remaining = DateUtil.timeDiff(new Date(), eventEnd);
   * console.log(`æ´»åŠ¨è¿˜å‰© ${remaining.days} å¤© ${remaining.hours} å°æ—¶`);
   *
   * // è®¡ç®—ä»»åŠ¡è€—æ—¶
   * const taskStart = Date.now();
   * // ... æ‰§è¡Œä»»åŠ¡
   * const taskEnd = Date.now();
   * const duration = DateUtil.timeDiff(taskStart, taskEnd);
   * console.log(`ä»»åŠ¡è€—æ—¶: ${duration.minutes}åˆ†${duration.seconds}ç§’`);
   * ```
   *
   * @static
   * @public
   */
  public static timeDiff(
    startDate: Date | number | string,
    endDate: Date | number | string = new Date()
  ): TimeDifference | null {
    const start = DateUtil.parseDate(startDate);
    const end = DateUtil.parseDate(endDate);

    if (!start || !end) return null;

    const diffInMs = Math.abs(end.getTime() - start.getTime());

    return {
      days: Math.floor(diffInMs / (1000 * 60 * 60 * 24)),
      hours: Math.floor((diffInMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
      minutes: Math.floor((diffInMs % (1000 * 60 * 60)) / (1000 * 60)),
      seconds: Math.floor((diffInMs % (1000 * 60)) / 1000)
    };
  }

  /**
   * è§£æå„ç§ç±»å‹çš„æ—¥æœŸè¾“å…¥ä¸ºDateå¯¹è±¡
   *
   * ç»Ÿä¸€å¤„ç†Dateå¯¹è±¡ã€æ—¶é—´æˆ³ã€å­—ç¬¦ä¸²ç­‰ä¸åŒæ ¼å¼çš„æ—¥æœŸè¾“å…¥
   *
   * @param date è¦è§£æçš„æ—¥æœŸ
   * @returns è§£æåçš„Dateå¯¹è±¡ï¼Œè§£æå¤±è´¥æ—¶è¿”å›null
   *
   * @private
   * @static
   */
  private static parseDate(date: Date | number | string): Date | null {
    if (!date) return null;

    let dateObj: Date;

    if (date instanceof Date) {
      dateObj = date;
    } else if (typeof date === 'number') {
      dateObj = new Date(date);
    } else {
      // å¤„ç†å­—ç¬¦ä¸²æ ¼å¼çš„å…¼å®¹æ€§
      let dateString = date.toString();

      // å…¼å®¹ä¸åŒçš„æ—¥æœŸå­—ç¬¦ä¸²æ ¼å¼
      if (dateString.includes('-') && !dateString.includes('T')) {
        dateString = dateString.replace(/-/g, '/');
      }

      const timestamp = Date.parse(dateString);
      if (isNaN(timestamp)) {
        console.error('Invalid date string:', date);
        return null;
      }
      dateObj = new Date(timestamp);
    }

    // éªŒè¯æ—¥æœŸæœ‰æ•ˆæ€§
    if (isNaN(dateObj.getTime())) {
      console.error('Invalid date:', date);
      return null;
    }

    return dateObj;
  }

  /**
   * æ£€æŸ¥ç»™å®šæ ¼å¼æ˜¯å¦ä¸ºé¢„è®¾æ ¼å¼
   *
   * @param format è¦æ£€æŸ¥çš„æ ¼å¼å­—ç¬¦ä¸²
   * @returns æ˜¯å¦ä¸ºé¢„è®¾æ ¼å¼
   *
   * @private
   * @static
   */
  private static isPresetFormat(format: string): boolean {
    return format === DateUtil.FORMATS.DATE ||
           format === DateUtil.FORMATS.TIME ||
           format === DateUtil.FORMATS.DATETIME ||
           format === DateUtil.FORMATS.TIME_12;
  }

  /**
   * ä½¿ç”¨ä¼˜åŒ–çš„ç³»ç»ŸAPIè¿›è¡Œæ ¼å¼åŒ–
   *
   * é’ˆå¯¹å¸¸ç”¨çš„é¢„è®¾æ ¼å¼è¿›è¡Œä¼˜åŒ–å¤„ç†ï¼Œé¿å…ArkTSç»“æ„åŒ–ç±»å‹é—®é¢˜
   *
   * @param date Dateå¯¹è±¡
   * @param format æ ¼å¼å­—ç¬¦ä¸²
   * @param locale æœ¬åœ°åŒ–è®¾ç½®
   * @returns æ ¼å¼åŒ–ç»“æœï¼Œå¤±è´¥æ—¶è¿”å›null
   *
   * @private
   * @static
   */
  private static formatWithSystemAPI(date: Date, format: string, locale: string): string | null {
    try {
      // ç›´æ¥ä½¿ç”¨ç®€åŒ–çš„æ ¼å¼åŒ–æ–¹å¼ï¼Œé¿å…ç»“æ„åŒ–ç±»å‹é—®é¢˜
      if (format === DateUtil.FORMATS.DATE) {
        return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`;
      } else if (format === DateUtil.FORMATS.TIME) {
        return `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;
      } else if (format === DateUtil.FORMATS.DATETIME) {
        const dateStr = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`;
        const timeStr = `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;
        return `${dateStr} ${timeStr}`;
      } else if (format === DateUtil.FORMATS.TIME_12) {
        const hour12 = DateUtil.get12Hour(date.getHours());
        const ampm = date.getHours() < 12 ? (locale === 'zh-CN' ? 'ä¸Šåˆ' : 'AM') : (locale === 'zh-CN' ? 'ä¸‹åˆ' : 'PM');
        return `${hour12.toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')} ${ampm}`;
      } else {
        return null;
      }
    } catch (error) {
      console.warn('System format failed:', error);
      return null;
    }
  }

  /**
   * è·å–æŒ‡å®šè¯­è¨€çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²
   *
   * @param locale è¯­è¨€ä»£ç 
   * @returns æœ¬åœ°åŒ–å­—ç¬¦ä¸²å¯¹è±¡
   *
   * @private
   * @static
   */
  private static getLocaleStrings(locale: string): LocaleStrings {
    if (locale === 'en-US') {
      return {
        justNow: 'just now',
        minutesAgo: 'minutes ago',
        hoursAgo: 'hours ago',
        daysAgo: 'days ago',
        weeksAgo: 'weeks ago',
        monthsAgo: 'months ago',
        yearsAgo: 'years ago',
        in: 'in',
        minutes: 'minutes',
        hours: 'hours',
        days: 'days',
        weeks: 'weeks',
        months: 'months',
        years: 'years',
        yesterday: 'yesterday',
        today: 'today',
        tomorrow: 'tomorrow',
        am: 'AM',
        pm: 'PM'
      };
    }

    // é»˜è®¤è¿”å›ä¸­æ–‡
    return {
      justNow: 'åˆšåˆš',
      minutesAgo: 'åˆ†é’Ÿå‰',
      hoursAgo: 'å°æ—¶å‰',
      daysAgo: 'å¤©å‰',
      weeksAgo: 'å‘¨å‰',
      monthsAgo: 'ä¸ªæœˆå‰',
      yearsAgo: 'å¹´å‰',
      in: 'å',
      minutes: 'åˆ†é’Ÿ',
      hours: 'å°æ—¶',
      days: 'å¤©',
      weeks: 'å‘¨',
      months: 'ä¸ªæœˆ',
      years: 'å¹´',
      yesterday: 'æ˜¨å¤©',
      today: 'ä»Šå¤©',
      tomorrow: 'æ˜å¤©',
      am: 'ä¸Šåˆ',
      pm: 'ä¸‹åˆ'
    };
  }

  /**
   * è‡ªå®šä¹‰æ ¼å¼åŒ–æ ¸å¿ƒé€»è¾‘
   *
   * è§£ææ ¼å¼å­—ç¬¦ä¸²å¹¶æ›¿æ¢ä¸ºå®é™…çš„æ—¥æœŸæ—¶é—´å€¼
   *
   * @param date Dateå¯¹è±¡
   * @param format æ ¼å¼å­—ç¬¦ä¸²
   * @param locale æœ¬åœ°åŒ–è®¾ç½®
   * @returns æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²
   *
   * @private
   * @static
   */
  private static customFormat(date: Date, format: string, locale: string): string {
    const strings = DateUtil.getLocaleStrings(locale);

    // åˆ›å»ºæ ¼å¼æ˜ å°„
    const formatMap = new Map<string, string>();

    // å¹´ä»½æ ¼å¼
    formatMap.set('yyyy', date.getFullYear().toString());
    formatMap.set('yy', date.getFullYear().toString().slice(-2));

    // æœˆä»½æ ¼å¼
    formatMap.set('MMMM', DateUtil.getMonthName(date.getMonth(), 'long', locale));
    formatMap.set('MMM', DateUtil.getMonthName(date.getMonth(), 'short', locale));
    formatMap.set('MM', (date.getMonth() + 1).toString().padStart(2, '0'));
    formatMap.set('M', (date.getMonth() + 1).toString());

    // æ—¥æœŸæ ¼å¼
    formatMap.set('dd', date.getDate().toString().padStart(2, '0'));
    formatMap.set('d', date.getDate().toString());

    // å¹´ä»½ä¸­çš„å¤©æ•°æ ¼å¼
    const dayOfYear = DateUtil.getDayOfYear(date);
    formatMap.set('DDD', dayOfYear.toString().padStart(3, '0'));
    formatMap.set('DD', dayOfYear.toString().padStart(2, '0'));
    formatMap.set('D', dayOfYear.toString());

    // æ˜ŸæœŸæ ¼å¼
    formatMap.set('EEEE', DateUtil.getWeekdayName(date.getDay(), 'long', locale));
    formatMap.set('EEE', DateUtil.getWeekdayName(date.getDay(), 'short', locale));
    formatMap.set('EE', DateUtil.getWeekdayName(date.getDay(), 'short', locale));
    formatMap.set('E', DateUtil.getWeekdayName(date.getDay(), 'narrow', locale));

    // å°æ—¶æ ¼å¼
    formatMap.set('HH', date.getHours().toString().padStart(2, '0'));
    formatMap.set('H', date.getHours().toString());
    formatMap.set('hh', DateUtil.get12Hour(date.getHours()).toString().padStart(2, '0'));
    formatMap.set('h', DateUtil.get12Hour(date.getHours()).toString());

    // åˆ†é’Ÿæ ¼å¼
    formatMap.set('mm', date.getMinutes().toString().padStart(2, '0'));
    formatMap.set('m', date.getMinutes().toString());

    // ç§’é’Ÿæ ¼å¼
    formatMap.set('ss', date.getSeconds().toString().padStart(2, '0'));
    formatMap.set('s', date.getSeconds().toString());

    // æ¯«ç§’æ ¼å¼
    formatMap.set('SSS', date.getMilliseconds().toString().padStart(3, '0'));
    formatMap.set('SS', date.getMilliseconds().toString().padStart(3, '0').slice(0, 2));
    formatMap.set('S', Math.floor(date.getMilliseconds() / 100).toString());

    // ä¸Šåˆ/ä¸‹åˆæ ‡è¯†
    formatMap.set('a', date.getHours() < 12 ? strings.am : strings.pm);

    // æ—¶åŒºä¿¡æ¯ï¼ˆç®€åŒ–å¤„ç†ï¼‰
    formatMap.set('z', 'CST');
    formatMap.set('Z', '+0800');

    return format.replace(DateUtil.FORMAT_REGEX, (match) => {
      return formatMap.get(match) || match;
    });
  }

  /**
   * ç”Ÿæˆç›¸å¯¹æ—¶é—´æè¿°å­—ç¬¦ä¸²
   *
   * @param value æ•°å€¼
   * @param unit æ—¶é—´å•ä½
   * @param isFuture æ˜¯å¦ä¸ºæœªæ¥æ—¶é—´
   * @param strings æœ¬åœ°åŒ–å­—ç¬¦ä¸²
   * @returns ç›¸å¯¹æ—¶é—´å­—ç¬¦ä¸²
   *
   * @private
   * @static
   */
  private static formatRelativeTimeString(
    value: number,
    unit: string,
    isFuture: boolean,
    strings: LocaleStrings
  ): string {
    let unitString = '';
    if (unit === 'minute') unitString = strings.minutes;
    else if (unit === 'hour') unitString = strings.hours;
    else if (unit === 'day') unitString = strings.days;
    else if (unit === 'week') unitString = strings.weeks;
    else if (unit === 'month') unitString = strings.months;
    else if (unit === 'year') unitString = strings.years;

    if (isFuture) {
      return `${value}${unitString}${strings.in}`;
    } else {
      return `${value}${unitString}${strings.minutesAgo.includes('å‰') ? 'å‰' : ' ago'}`;
    }
  }

  /**
   * è·å–æœ¬åœ°åŒ–çš„æœˆä»½åç§°
   *
   * @param month æœˆä»½ç´¢å¼•ï¼ˆ0-11ï¼‰
   * @param style æ˜¾ç¤ºæ ·å¼ï¼š'long'å®Œæ•´åç§°, 'short'ç¼©å†™
   * @param locale è¯­è¨€è®¾ç½®
   * @returns æœˆä»½åç§°
   *
   * @private
   * @static
   */
  private static getMonthName(month: number, style: 'long' | 'short', locale: string): string {
    if (locale === 'zh-CN') {
      if (style === 'long') {
        const months = ['ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ'];
        return months[month] || `${month + 1}æœˆ`;
      } else {
        return `${month + 1}æœˆ`;
      }
    } else {
      if (style === 'long') {
        const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
        return months[month] || `${month + 1}`;
      } else {
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        return months[month] || `${month + 1}`;
      }
    }
  }

  /**
   * è·å–æœ¬åœ°åŒ–çš„æ˜ŸæœŸåç§°
   *
   * @param day æ˜ŸæœŸç´¢å¼•ï¼ˆ0-6ï¼Œ0ä»£è¡¨æ˜ŸæœŸæ—¥ï¼‰
   * @param style æ˜¾ç¤ºæ ·å¼ï¼š'long'å®Œæ•´åç§°, 'short'ç¼©å†™, 'narrow'æœ€çŸ­å½¢å¼
   * @param locale è¯­è¨€è®¾ç½®
   * @returns æ˜ŸæœŸåç§°
   *
   * @private
   * @static
   */
  private static getWeekdayName(day: number, style: 'long' | 'short' | 'narrow', locale: string): string {
    if (locale === 'zh-CN') {
      const weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
      return style === 'long' ? `æ˜ŸæœŸ${weekdays[day]}` : weekdays[day] || day.toString();
    } else {
      if (style === 'long') {
        const weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        return weekdays[day] || day.toString();
      } else {
        const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        return weekdays[day] || day.toString();
      }
    }
  }

  /**
   * å°†24å°æ—¶åˆ¶è½¬æ¢ä¸º12å°æ—¶åˆ¶
   *
   * @param hour 24å°æ—¶åˆ¶çš„å°æ—¶æ•°ï¼ˆ0-23ï¼‰
   * @returns 12å°æ—¶åˆ¶çš„å°æ—¶æ•°ï¼ˆ1-12ï¼‰
   *
   * @private
   * @static
   */
  private static get12Hour(hour: number): number {
    return hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;
  }

  /**
   * è®¡ç®—æŒ‡å®šæ—¥æœŸæ˜¯è¯¥å¹´çš„ç¬¬å‡ å¤©
   *
   * @param date è¦è®¡ç®—çš„æ—¥æœŸ
   * @returns å¹´ä»½ä¸­çš„å¤©æ•°ï¼ˆ1-366ï¼‰
   *
   * @example
   * ```typescript
   * // 1æœˆ1æ—¥æ˜¯ç¬¬1å¤©
   * DateUtil.getDayOfYear(new Date('2024-01-01'))  // 1
   *
   * // 12æœˆ31æ—¥æ˜¯ç¬¬365å¤©ï¼ˆéé—°å¹´ï¼‰æˆ–ç¬¬366å¤©ï¼ˆé—°å¹´ï¼‰
   * DateUtil.getDayOfYear(new Date('2024-12-31'))  // 366 (2024æ˜¯é—°å¹´)
   * DateUtil.getDayOfYear(new Date('2023-12-31'))  // 365 (2023ä¸æ˜¯é—°å¹´)
   * ```
   *
   * @private
   * @static
   */
  private static getDayOfYear(date: Date): number {
    const start = new Date(date.getFullYear(), 0, 1); // å½“å¹´1æœˆ1æ—¥
    const diff = date.getTime() - start.getTime();
    const oneDay = 1000 * 60 * 60 * 24; // ä¸€å¤©çš„æ¯«ç§’æ•°
    return Math.floor(diff / oneDay) + 1;
  }

  /**
   * æ¯”è¾ƒä¸¤ä¸ªæ—¥æœŸçš„å¤§å°å…³ç³»
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ¯”è¾ƒç»“æœï¼š-1è¡¨ç¤ºdate1æ—©äºdate2ï¼Œ0è¡¨ç¤ºç›¸ç­‰ï¼Œ1è¡¨ç¤ºdate1æ™šäºdate2ï¼Œnullè¡¨ç¤ºè§£æå¤±è´¥
   *
   * @example
   * ```typescript
   * const date1 = new Date('2024-01-15');
   * const date2 = new Date('2024-01-16');
   *
   * DateUtil.compareDates(date1, date2)  // -1 (date1æ—©äºdate2)
   * DateUtil.compareDates(date2, date1)  // 1  (date2æ™šäºdate1)
   * DateUtil.compareDates(date1, date1)  // 0  (ç›¸ç­‰)
   * ```
   *
   * @static
   * @public
   */
  public static compareDates(date1: Date | number | string, date2: Date | number | string): number | null {
    const dateObj1 = DateUtil.parseDate(date1);
    const dateObj2 = DateUtil.parseDate(date2);

    if (!dateObj1 || !dateObj2) return null;

    const time1 = dateObj1.getTime();
    const time2 = dateObj2.getTime();

    if (time1 < time2) return -1;
    if (time1 > time2) return 1;
    return 0;
  }

  /**
   * åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ—¶é—´æ˜¯å¦å®Œå…¨ç›¸ç­‰
   *
   * ç²¾ç¡®æ¯”è¾ƒåˆ°æ¯«ç§’çº§åˆ«
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦ç›¸ç­‰
   *
   * @example
   * ```typescript
   * const date1 = new Date('2024-01-15 14:30:25.123');
   * const date2 = new Date('2024-01-15 14:30:25.123');
   * const date3 = new Date('2024-01-15 14:30:25.124');
   *
   * DateUtil.isEqual(date1, date2)  // true
   * DateUtil.isEqual(date1, date3)  // false
   * ```
   *
   * @static
   * @public
   */
  public static isEqual(date1: Date | number | string, date2: Date | number | string): boolean {
    return DateUtil.compareDates(date1, date2) === 0;
  }

  /**
   * åˆ¤æ–­ç¬¬ä¸€ä¸ªæ—¥æœŸæ˜¯å¦æ—©äºç¬¬äºŒä¸ªæ—¥æœŸ
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦æ—©äº
   *
   * @example
   * ```typescript
   * const yesterday = new Date('2024-01-14');
   * const today = new Date('2024-01-15');
   *
   * DateUtil.isBefore(yesterday, today)  // true
   * DateUtil.isBefore(today, yesterday)  // false
   * DateUtil.isBefore(today, today)      // false
   * ```
   *
   * @static
   * @public
   */
  public static isBefore(date1: Date | number | string, date2: Date | number | string): boolean {
    return DateUtil.compareDates(date1, date2) === -1;
  }

  /**
   * åˆ¤æ–­ç¬¬ä¸€ä¸ªæ—¥æœŸæ˜¯å¦æ™šäºç¬¬äºŒä¸ªæ—¥æœŸ
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦æ™šäº
   *
   * @example
   * ```typescript
   * const today = new Date('2024-01-15');
   * const tomorrow = new Date('2024-01-16');
   *
   * DateUtil.isAfter(tomorrow, today)  // true
   * DateUtil.isAfter(today, tomorrow)  // false
   * DateUtil.isAfter(today, today)     // false
   * ```
   *
   * @static
   * @public
   */
  public static isAfter(date1: Date | number | string, date2: Date | number | string): boolean {
    return DateUtil.compareDates(date1, date2) === 1;
  }

  /**
   * åˆ¤æ–­ç¬¬ä¸€ä¸ªæ—¥æœŸæ˜¯å¦æ—©äºæˆ–ç­‰äºç¬¬äºŒä¸ªæ—¥æœŸ
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦æ—©äºæˆ–ç­‰äº
   *
   * @example
   * ```typescript
   * const date1 = new Date('2024-01-15');
   * const date2 = new Date('2024-01-16');
   * const date3 = new Date('2024-01-15');
   *
   * DateUtil.isBeforeOrEqual(date1, date2)  // true (æ—©äº)
   * DateUtil.isBeforeOrEqual(date1, date3)  // true (ç›¸ç­‰)
   * DateUtil.isBeforeOrEqual(date2, date1)  // false
   * ```
   *
   * @static
   * @public
   */
  public static isBeforeOrEqual(date1: Date | number | string, date2: Date | number | string): boolean {
    const result = DateUtil.compareDates(date1, date2);
    return result === -1 || result === 0;
  }

  /**
   * åˆ¤æ–­ç¬¬ä¸€ä¸ªæ—¥æœŸæ˜¯å¦æ™šäºæˆ–ç­‰äºç¬¬äºŒä¸ªæ—¥æœŸ
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦æ™šäºæˆ–ç­‰äº
   *
   * @example
   * ```typescript
   * const date1 = new Date('2024-01-16');
   * const date2 = new Date('2024-01-15');
   * const date3 = new Date('2024-01-16');
   *
   * DateUtil.isAfterOrEqual(date1, date2)  // true (æ™šäº)
   * DateUtil.isAfterOrEqual(date1, date3)  // true (ç›¸ç­‰)
   * DateUtil.isAfterOrEqual(date2, date1)  // false
   * ```
   *
   * @static
   * @public
   */
  public static isAfterOrEqual(date1: Date | number | string, date2: Date | number | string): boolean {
    const result = DateUtil.compareDates(date1, date2);
    return result === 1 || result === 0;
  }

  /**
   * åˆ¤æ–­æ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šèŒƒå›´å†…ï¼ˆåŒ…å«è¾¹ç•Œï¼‰
   *
   * @param date è¦åˆ¤æ–­çš„æ—¥æœŸ
   * @param startDate å¼€å§‹æ—¥æœŸ
   * @param endDate ç»“æŸæ—¥æœŸ
   * @returns æ˜¯å¦åœ¨èŒƒå›´å†…
   *
   * @example
   * ```typescript
   * const checkDate = new Date('2024-01-15');
   * const start = new Date('2024-01-10');
   * const end = new Date('2024-01-20');
   *
   * DateUtil.isBetween(checkDate, start, end)  // true
   *
   * // å®é™…åº”ç”¨ï¼šåˆ¤æ–­æ˜¯å¦åœ¨æ´»åŠ¨æœŸé—´
   * const eventStart = new Date('2024-12-01');
   * const eventEnd = new Date('2024-12-31');
   * const now = new Date();
   *
   * if (DateUtil.isBetween(now, eventStart, eventEnd)) {
   *   console.log('æ´»åŠ¨è¿›è¡Œä¸­');
   * }
   * ```
   *
   * @static
   * @public
   */
  public static isBetween(
    date: Date | number | string,
    startDate: Date | number | string,
    endDate: Date | number | string
  ): boolean {
    return DateUtil.isAfterOrEqual(date, startDate) && DateUtil.isBeforeOrEqual(date, endDate);
  }

  /**
   * åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ä¸ºåŒä¸€å¤©ï¼ˆå¿½ç•¥æ—¶åˆ†ç§’ï¼‰
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦ä¸ºåŒä¸€å¤©
   *
   * @example
   * ```typescript
   * const morning = new Date('2024-01-15 08:30:00');
   * const evening = new Date('2024-01-15 20:45:30');
   * const nextDay = new Date('2024-01-16 08:30:00');
   *
   * DateUtil.isSameDayAs(morning, evening)  // true
   * DateUtil.isSameDayAs(morning, nextDay)  // false
   * ```
   *
   * @static
   * @public
   */
  public static isSameDayAs(date1: Date | number | string, date2: Date | number | string): boolean {
    const dateObj1 = DateUtil.parseDate(date1);
    const dateObj2 = DateUtil.parseDate(date2);

    if (!dateObj1 || !dateObj2) return false;

    return DateUtil.isSameDay(dateObj1, dateObj2);
  }

  /**
   * åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ä¸ºåŒä¸€å‘¨
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦ä¸ºåŒä¸€å‘¨
   *
   * @example
   * ```typescript
   * const monday = new Date('2024-01-15');    // å‡è®¾æ˜¯å‘¨ä¸€
   * const friday = new Date('2024-01-19');    // åŒä¸€å‘¨çš„å‘¨äº”
   * const nextMonday = new Date('2024-01-22'); // ä¸‹å‘¨çš„å‘¨ä¸€
   *
   * DateUtil.isSameWeekAs(monday, friday)     // true
   * DateUtil.isSameWeekAs(monday, nextMonday) // false
   * ```
   *
   * @static
   * @public
   */
  public static isSameWeekAs(date1: Date | number | string, date2: Date | number | string): boolean {
    const dateObj1 = DateUtil.parseDate(date1);
    const dateObj2 = DateUtil.parseDate(date2);

    if (!dateObj1 || !dateObj2) return false;

    // è®¡ç®—ä¸¤ä¸ªæ—¥æœŸæ‰€åœ¨å‘¨çš„å¼€å§‹æ—¥æœŸ
    const getWeekStart = (date: Date): Date => {
      const start = new Date(date);
      start.setDate(date.getDate() - date.getDay());
      start.setHours(0, 0, 0, 0);
      return start;
    };

    const week1Start = getWeekStart(dateObj1);
    const week2Start = getWeekStart(dateObj2);

    return week1Start.getTime() === week2Start.getTime();
  }

  /**
   * åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ä¸ºåŒä¸€æœˆ
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦ä¸ºåŒä¸€æœˆ
   *
   * @example
   * ```typescript
   * const early = new Date('2024-01-05');
   * const late = new Date('2024-01-25');
   * const nextMonth = new Date('2024-02-05');
   *
   * DateUtil.isSameMonthAs(early, late)       // true
   * DateUtil.isSameMonthAs(early, nextMonth)  // false
   * ```
   *
   * @static
   * @public
   */
  public static isSameMonthAs(date1: Date | number | string, date2: Date | number | string): boolean {
    const dateObj1 = DateUtil.parseDate(date1);
    const dateObj2 = DateUtil.parseDate(date2);

    if (!dateObj1 || !dateObj2) return false;

    return dateObj1.getFullYear() === dateObj2.getFullYear() &&
           dateObj1.getMonth() === dateObj2.getMonth();
  }

  /**
   * åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ä¸ºåŒä¸€å¹´
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦ä¸ºåŒä¸€å¹´
   *
   * @example
   * ```typescript
   * const spring = new Date('2024-03-15');
   * const winter = new Date('2024-12-15');
   * const nextYear = new Date('2025-03-15');
   *
   * DateUtil.isSameYearAs(spring, winter)    // true
   * DateUtil.isSameYearAs(spring, nextYear)  // false
   * ```
   *
   * @static
   * @public
   */
  public static isSameYearAs(date1: Date | number | string, date2: Date | number | string): boolean {
    const dateObj1 = DateUtil.parseDate(date1);
    const dateObj2 = DateUtil.parseDate(date2);

    if (!dateObj1 || !dateObj2) return false;

    return dateObj1.getFullYear() === dateObj2.getFullYear();
  }

  /**
   * è·å–ä¸¤ä¸ªæ—¥æœŸä¸­è¾ƒæ—©çš„æ—¥æœŸ
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns è¾ƒæ—©çš„æ—¥æœŸï¼Œè§£æå¤±è´¥æ—¶è¿”å›null
   *
   * @example
   * ```typescript
   * const date1 = new Date('2024-01-15');
   * const date2 = new Date('2024-01-20');
   *
   * const earlier = DateUtil.min(date1, date2);
   * console.log(DateUtil.formatDate(earlier, DateUtil.FORMATS.DATE));
   * // è¾“å‡º: "2024-01-15"
   * ```
   *
   * @static
   * @public
   */
  public static min(date1: Date | number | string, date2: Date | number | string): Date | null {
    const dateObj1 = DateUtil.parseDate(date1);
    const dateObj2 = DateUtil.parseDate(date2);

    if (!dateObj1 || !dateObj2) return null;

    return dateObj1.getTime() <= dateObj2.getTime() ? dateObj1 : dateObj2;
  }

  /**
   * è·å–ä¸¤ä¸ªæ—¥æœŸä¸­è¾ƒæ™šçš„æ—¥æœŸ
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns è¾ƒæ™šçš„æ—¥æœŸï¼Œè§£æå¤±è´¥æ—¶è¿”å›null
   *
   * @example
   * ```typescript
   * const date1 = new Date('2024-01-15');
   * const date2 = new Date('2024-01-20');
   *
   * const later = DateUtil.max(date1, date2);
   * console.log(DateUtil.formatDate(later, DateUtil.FORMATS.DATE));
   * // è¾“å‡º: "2024-01-20"
   * ```
   *
   * @static
   * @public
   */
  public static max(date1: Date | number | string, date2: Date | number | string): Date | null {
    const dateObj1 = DateUtil.parseDate(date1);
    const dateObj2 = DateUtil.parseDate(date2);

    if (!dateObj1 || !dateObj2) return null;

    return dateObj1.getTime() >= dateObj2.getTime() ? dateObj1 : dateObj2;
  }

  /**
   * è®¡ç®—æŒ‡å®šæ—¥æœŸæ˜¯è¯¥å¹´çš„ç¬¬å‡ å¤©
   *
   * @param date è¦è®¡ç®—çš„æ—¥æœŸ
   * @returns å¹´ä»½ä¸­çš„å¤©æ•°ï¼ˆ1-366ï¼‰ï¼Œè§£æå¤±è´¥æ—¶è¿”å›null
   *
   * @example
   * ```typescript
   * // åŸºç¡€ä½¿ç”¨
   * DateUtil.getDayOfYearPublic(new Date('2024-01-01'))  // 1
   * DateUtil.getDayOfYearPublic(new Date('2024-02-01'))  // 32
   * DateUtil.getDayOfYearPublic(new Date('2024-12-31'))  // 366 (2024æ˜¯é—°å¹´)
   *
   * // å®é™…åº”ç”¨ï¼šè®¡ç®—å·²è¿‡å»çš„å¤©æ•°ç™¾åˆ†æ¯”
   * const today = new Date();
   * const dayOfYear = DateUtil.getDayOfYearPublic(today);
   * const isLeapYear = DateUtil.isLeapYear(today.getFullYear());
   * const totalDays = isLeapYear ? 366 : 365;
   * const percentage = (dayOfYear / totalDays * 100).toFixed(1);
   * console.log(`ä»Šå¹´å·²è¿‡å» ${percentage}%`);
   * ```
   *
   * @static
   * @public
   */
  public static getDayOfYearPublic(date: Date | number | string): number | null {
    const dateObj = DateUtil.parseDate(date);
    if (!dateObj) return null;

    return DateUtil.getDayOfYear(dateObj);
  }

  /**
   * åˆ¤æ–­æŒ‡å®šå¹´ä»½æ˜¯å¦ä¸ºé—°å¹´
   *
   * @param year å¹´ä»½
   * @returns æ˜¯å¦ä¸ºé—°å¹´
   *
   * @example
   * ```typescript
   * DateUtil.isLeapYear(2024)  // true  (èƒ½è¢«4æ•´é™¤ä¸”ä¸æ˜¯ä¸–çºªå¹´ï¼Œæˆ–èƒ½è¢«400æ•´é™¤)
   * DateUtil.isLeapYear(2023)  // false
   * DateUtil.isLeapYear(2000)  // true  (èƒ½è¢«400æ•´é™¤)
   * DateUtil.isLeapYear(1900)  // false (èƒ½è¢«100æ•´é™¤ä½†ä¸èƒ½è¢«400æ•´é™¤)
   *
   * // ç»“åˆä½¿ç”¨ï¼šè·å–å½“å¹´æ€»å¤©æ•°
   * const year = new Date().getFullYear();
   * const totalDays = DateUtil.isLeapYear(year) ? 366 : 365;
   * console.log(`${year}å¹´å…±æœ‰ ${totalDays} å¤©`);
   * ```
   *
   * @static
   * @public
   */
  public static isLeapYear(year: number): boolean {
    return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
  }

  /**
   * åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ä¸ºåŒä¸€å¤©
   *
   * åªæ¯”è¾ƒå¹´æœˆæ—¥ï¼Œå¿½ç•¥æ—¶åˆ†ç§’
   *
   * @param date1 ç¬¬ä¸€ä¸ªæ—¥æœŸ
   * @param date2 ç¬¬äºŒä¸ªæ—¥æœŸ
   * @returns æ˜¯å¦ä¸ºåŒä¸€å¤©
   *
   * @private
   * @static
   */
  private static isSameDay(date1: Date, date2: Date): boolean {
    return date1.getFullYear() === date2.getFullYear() &&
           date1.getMonth() === date2.getMonth() &&
           date1.getDate() === date2.getDate();
  }
}


// const eventStart = new Date('2025-08-01');
// const eventEnd = new Date('2025-08-31');
// const now = new Date();

// if (DateUtil.isBetween(now, eventStart, eventEnd)) {
//   console.log('æ´»åŠ¨è¿›è¡Œä¸­ ğŸ‰');
// } else if (DateUtil.isBefore(now, eventStart)) {
//   console.log('æ´»åŠ¨æœªå¼€å§‹ â°');
// } else {
//   console.log('æ´»åŠ¨å·²ç»“æŸ âœ…');
// }

