// ç”¨æˆ·ä¿¡æ¯æ¥å£
interface UserInfo {
  avatar: string;
  username: string;
  studentId: string;
  college: string;
  major: string;
  className: string;
}

// èœå•é¡¹ç±»å‹æ¥å£
interface MenuItemType {
  icon: string;
  title: string;
  desc: string;
}

@Component
export struct MinePage {
  @State private userInfo: UserInfo = {
    avatar: 'ğŸ‘¤',
    username: 'éœå®¢åŒå­¦',
    studentId: '2024001',
    college: 'è®¡ç®—æœºå­¦é™¢',
    major: 'è½¯ä»¶å·¥ç¨‹',
    className: 'è½¯å·¥2024-1ç­'
  };

  build() {
    Column() {
      // ç”¨æˆ·ä¿¡æ¯å¡ç‰‡
      Column() {
        Row() {
          // å¤´åƒ
          Text(this.userInfo.avatar)
            .fontSize(48)
            .width(80)
            .height(80)
            .backgroundColor('#E3F2FD')
            .borderRadius(40)
            .textAlign(TextAlign.Center)
            .margin({ right: 16 })

          // ç”¨æˆ·ä¿¡æ¯
          Column() {
            Text(this.userInfo.username)
              .fontSize(20)
              .fontWeight(FontWeight.Bold)
              .fontColor('#333333')
              .margin({ bottom: 4 })
            Text(`å­¦å·ï¼š${this.userInfo.studentId}`)
              .fontSize(14)
              .fontColor('#666666')
              .margin({ bottom: 2 })
            Text(`${this.userInfo.college} Â· ${this.userInfo.major}`)
              .fontSize(12)
              .fontColor('#999999')
              .margin({ bottom: 2 })
            Text(this.userInfo.className)
              .fontSize(12)
              .fontColor('#999999')
          }
          .alignItems(HorizontalAlign.Start)
          .layoutWeight(1)
        }
        .width('100%')
        .alignItems(VerticalAlign.Center)
      }
      .width('90%')
      .padding(20)
      .backgroundColor(Color.White)
      .borderRadius(12)
      .shadow({
        radius: 8,
        color: 'rgba(0, 0, 0, 0.1)',
        offsetY: 2
      })
      .margin({ top: 50, bottom: 20 })

      // åŠŸèƒ½åˆ—è¡¨
      Column() {
        this.MenuSection('ä¸ªäººä¿¡æ¯', this.getPersonalItems())
        this.MenuSection('å­¦ä¹ ç›¸å…³', this.getStudyItems())
        this.MenuSection('ç³»ç»ŸåŠŸèƒ½', this.getSystemItems())
      }
      .width('90%')
      .layoutWeight(1)

      Blank()

      // é€€å‡ºç™»å½•æŒ‰é’®
      Button('é€€å‡ºç™»å½•')
        .width('60%')
        .height(45)
        .fontSize(16)
        .fontColor('#FF5722')
        .backgroundColor(Color.White)
        .borderRadius(22)
        .border({
          width: 1,
          color: '#FF5722'
        })
        .margin({ bottom: 60 })
        .onClick(() => {
          // é€€å‡ºç™»å½•é€»è¾‘
        })
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F5F5F5')
  }

  @Builder
  MenuSection(title: string, items: MenuItemType[]) {
    Column() {
      Text(title)
        .fontSize(16)
        .fontWeight(FontWeight.Medium)
        .fontColor('#333333')
        .width('100%')
        .margin({ bottom: 12 })

      Column() {
        ForEach(items, (item: MenuItemType, index: number) => {
          Row() {
            Text(item.icon)
              .fontSize(24)
              .width(40)
              .textAlign(TextAlign.Center)
              .margin({ right: 12 })

            Column() {
              Text(item.title)
                .fontSize(16)
                .fontColor('#333333')
                .fontWeight(FontWeight.Medium)
                .width('100%')
                .margin({ bottom: 2 })
              Text(item.desc)
                .fontSize(12)
                .fontColor('#999999')
                .width('100%')
            }
            .alignItems(HorizontalAlign.Start)
            .layoutWeight(1)

            Text('>')
              .fontSize(16)
              .fontColor('#CCCCCC')
          }
          .width('100%')
          .height(60)
          .padding({ left: 16, right: 16 })
          .alignItems(VerticalAlign.Center)
          .onClick(() => {
            // å¤„ç†ç‚¹å‡»äº‹ä»¶
          })

          if (index < items.length - 1) {
            Divider()
              .color('#F0F0F0')
              .strokeWidth(0.5)
              .margin({ left: 68 })
          }
        })
      }
      .width('100%')
      .backgroundColor(Color.White)
      .borderRadius(12)
      .margin({ bottom: 20 })
    }
  }

  private getPersonalItems(): MenuItemType[] {
    return [
      { icon: 'ğŸ“', title: 'ä¸ªäººèµ„æ–™', desc: 'ä¿®æ”¹ä¸ªäººä¿¡æ¯' },
      { icon: 'ğŸ”’', title: 'è´¦å·å®‰å…¨', desc: 'å¯†ç ä¿®æ”¹ç­‰' }
    ];
  }

  private getStudyItems(): MenuItemType[] {
    return [
      { icon: 'â­', title: 'æˆ‘çš„è¯„ä»·', desc: 'è¯¾ç¨‹å’Œæ•™å¸ˆè¯„ä»·' },
      { icon: 'ğŸ“Š', title: 'å­¦ä¹ ç»Ÿè®¡', desc: 'è¯¾ç¨‹ç»Ÿè®¡ä¿¡æ¯' },
      { icon: 'ğŸ“…', title: 'è¯¾è¡¨ç®¡ç†', desc: 'è‡ªå®šä¹‰è¯¾è¡¨' }
    ];
  }

  private getSystemItems(): MenuItemType[] {
    return [
      { icon: 'ğŸ“¢', title: 'ç³»ç»Ÿé€šçŸ¥', desc: 'æŸ¥çœ‹ç³»ç»Ÿæ¶ˆæ¯' },
      { icon: 'â“', title: 'å¸®åŠ©åé¦ˆ', desc: 'é—®é¢˜åé¦ˆå’Œå¸®åŠ©' },
      { icon: 'â„¹ï¸', title: 'å…³äºæˆ‘ä»¬', desc: 'åº”ç”¨ä¿¡æ¯' }
    ];
  }
}